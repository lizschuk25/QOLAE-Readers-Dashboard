<!-- 
  * QOLAE Readers Dashboard
  * Secure workspace for Admin/Lay and Medical Professional readers
  * Organized by Location Block Protocol
  * Author: Liz
  * Date: 28th October 2025
  * 
  * WORKFLOW STEPS (Mirrored in Location Blocks):
  * 1. Header & Security Badges
  * 2. Reader Type Selector (Admin vs Medical)
  * 3. Welcome Section & Session Info
  * 4. Workflow Progress Tracker
  * 5. NDA Card (Workflow Step 1)
  * 6. Report Review Card (Workflow Step 2)
  * 7. Payment Card (Workflow Step 3)
  * 8. Document Library & Support
  * 9. Security Notice & Footer
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QOLAE Readers Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

<!-- ========================================== -->
<!-- LOCATION BLOCK 0: ALL CSS STYLES -->
<!-- ========================================== -->
    <style>
        /* ===== RESET & BASE STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* ===== HEADER STYLES ===== */
        .header {
            background: #ffffff;
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .logo-section {
            background: transparent;
            padding: 0;
            margin: 0;
            border: none;
            outline: none;
        }

        .logo-section h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: transparent;
            display: flex;
            align-items: center;
            height: 6.5rem;
            margin: 0;
            background: none;
            border: none;
            outline: none;
            box-shadow: none;
        }

        .logo-section h1 img {
            width: 100%;
            max-width: 500px;
            height: auto;
            object-fit: contain;
            border: none;
            outline: none;
            box-shadow: none;
        }

        .status-indicators {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .status-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .secure {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .gdpr {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
        }

        .logout-btn {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-left: 20px;
        }

        .logout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(220, 38, 38, 0.3);
            background: linear-gradient(135deg, #b91c1c, #991b1b);
        }

        /* ===== READER TYPE SELECTOR STYLES ===== */
        .reader-selector {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px 30px;
            border-radius: 12px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .reader-selector h3 {
            color: #1e293b;
            margin-bottom: 20px;
            font-size: 18px;
        }

        .reader-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .reader-option {
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .reader-option:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }

        .reader-option.active {
            border-color: #667eea;
            background: #f8faff;
        }

        .option-icon {
            font-size: 32px;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 50%;
        }

        .option-content h4 {
            color: #1e293b;
            margin-bottom: 5px;
            font-size: 16px;
        }

        .option-content p {
            color: #64748b;
            font-size: 14px;
            margin: 0;
        }

        /* ===== WELCOME SECTION STYLES ===== */
        .welcome-section {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }

        .welcome-title {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #1e293b;
        }

        .welcome-text {
            color: #64748b;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .session-info {
            display: flex;
            gap: 30px;
            font-size: 0.9rem;
            color: #64748b;
            flex-wrap: wrap;
        }

        /* ===== WORKFLOW PROGRESS STYLES ===== */
        .workflow-progress {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px 30px;
            border-radius: 12px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .progress-title {
            font-size: 20px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 20px;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin-bottom: 30px;
        }

        .progress-line {
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background: #e2e8f0;
            z-index: 1;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.5s ease;
        }

        .step {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            flex: 1;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #fff;
            border: 3px solid #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: #94a3b8;
            transition: all 0.3s ease;
        }

        .step.completed .step-circle {
            background: #10b981;
            border-color: #10b981;
            color: white;
        }

        .step.active .step-circle {
            border-color: #667eea;
            color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }

        .step-label {
            font-size: 13px;
            font-weight: 500;
            color: #64748b;
            text-align: center;
        }

        .step.completed .step-label {
            color: #10b981;
        }

        .step.active .step-label {
            color: #667eea;
            font-weight: 600;
        }

        /* ===== WORKFLOW CARDS CONTAINER (GRID LAYOUT) ===== */
        .workflow-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .dashboard-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            position: relative;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.12);
        }

        .status-indicator {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-completed {
            background: #dcfce7;
            color: #166534;
        }

        .status-active {
            background: #dbeafe;
            color: #1e40af;
        }

        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .card-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .card-icon.primary-icon {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        .card-icon.success-icon {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .card-icon.warning-icon {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        .card-icon.info-icon {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #1e293b;
        }

        .card-description {
            color: #64748b;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .card-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-decoration: none;
        }

        .btn:not(:disabled):hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }

        .btn-secondary {
            background: #f1f5f9;
            color: #475569;
        }

        .btn-secondary:hover {
            background: #e2e8f0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        /* ===== FOOTER CONTAINER (Merged Security Notice + Footer) ===== */
        .footer-container {
            background: white;
            border-radius: 15px;
            padding: 0;
            margin-top: 50px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            overflow: hidden;
        }

        .security-notice {
            background: #fef3c7;
            border-bottom: 2px solid #f59e0b;
            padding: 20px 30px;
        }

        .security-notice-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .security-notice-icon {
            font-size: 24px;
        }

        .security-notice-text {
            margin: 0;
            font-size: 14px;
            color: #92400e;
            line-height: 1.6;
        }

        .security-notice-text strong {
            font-weight: 600;
        }

        /* ===== FOOTER STYLES ===== */
        .footer {
            background: white;
            padding: 25px 30px;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .footer-text {
            margin: 0;
            color: #6b7280;
            font-size: 14px;
        }

        .footer-links {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: #3b82f6;
            text-decoration: none;
            font-size: 14px;
            transition: color 0.2s ease;
        }

        .footer-links a:hover {
            color: #2563eb;
            text-decoration: underline;
        }

        /* ===== READERS MANAGEMENT HUB STYLES ===== */
        /* RMH is a standard card - same size as other workflow cards */

        .dashboard-card.locked {
            opacity: 0.6;
            pointer-events: none;
        }

        .dashboard-card.locked::before {
            content: 'üîí';
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 768px) {
            .header-top {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .status-indicators {
                flex-direction: column;
                align-items: flex-start;
                width: 100%;
            }

            .logout-btn {
                margin-left: 0;
                width: 100%;
            }

            .workflow-cards {
                grid-template-columns: 1fr;
            }

            .session-info {
                flex-direction: column;
                gap: 10px;
            }

            .card-actions {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
<!-- ========================================== -->
<!-- LOCATION BLOCK 1: HEADER & SECURITY BADGES -->
<!-- ========================================== -->
        <div class="header">
            <div class="header-top">
                <div class="logo-section">
                    <h1>
                        <img src="https://api.qolae.com/centralRepository/public/images/qolaeNewLogo.png" 
                             alt="QOLAE Logo" />
                    </h1>
                </div>
                <div class="status-indicators">
                    <div class="status-badge secure">
                        <i class="fas fa-lock"></i>
                        <span>Secure</span>
                    </div>
                    <div class="status-badge gdpr">
                        <i class="fas fa-shield-alt"></i>
                        <span>GDPR Compliant</span>
                    </div>
                    <button class="logout-btn" onclick="window.location.href='/logout'">
                        <i class="fas fa-sign-out-alt"></i>
                        Logout
                    </button>
                </div>
            </div>

            
            <div class="welcome-section">
                <h2 class="welcome-title">Welcome <span id="welcomeName"><%= reader.readerName || 'Reader' %></span></h2>
                <p class="welcome-text">Access your secure professional review workspace. All data is encrypted and requires NDA compliance.</p>
                <div class="session-info">
                    <span><strong>Last login:</strong> <span id="lastLogin"><%= reader.lastLogin || 'First Login' %></span></span>
                    <span><strong>Session:</strong> <span id="sessionStatus">Encrypted & Secure</span></span>
                    <span><strong>Reader PIN:</strong> <span id="readerPin"><%= reader.readerPin %></span></span>
                </div>
            </div>
        </div>

<!-- ========================================== -->
<!-- LOCATION BLOCK 4: WORKFLOW PROGRESS TRACKER -->
<!-- Maps to: 3-step workflow (NDA ‚Üí Review ‚Üí Payment) -->
<!-- ========================================== -->
        <div class="workflow-progress">
            <h3 class="progress-title">Your Review Progress</h3>
            <div class="progress-steps">
                <div class="progress-line">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="step active">
                    <div class="step-circle">1</div>
                    <div class="step-label">NDA Signing</div>
                </div>
                <div class="step pending">
                    <div class="step-circle">2</div>
                    <div class="step-label">Document Review</div>
                </div>
                <div class="step pending">
                    <div class="step-circle">3</div>
                    <div class="step-label">Payment</div>
                </div>
            </div>
        </div>

<!-- ========================================== -->
<!-- LOCATION BLOCK 5: WORKFLOW CARDS (VERTICAL STACK) -->
<!-- Core 3-step workflow: NDA ‚Üí INA Review ‚Üí Payment -->
<!-- ========================================== -->
        <div class="workflow-cards">
            <!-- Card 1: NDA (Workflow Step 1) -->
            <div class="dashboard-card nda-card">
                <div class="status-indicator status-pending">‚è≥ Pending</div>
                <div class="card-header">
                    <div class="card-icon primary-icon">üìã</div>
                    <div class="card-title">Non-Disclosure Agreement</div>
                </div>
                <p class="card-description">
                    Review and digitally sign the NDA to access confidential report materials. Once signed, you'll be able to proceed to document review.
                </p>
                <div class="card-actions">
                    <button class="btn btn-primary" onclick="viewNDA()">‚úçÔ∏è Review & Sign NDA</button>
                    <button class="btn btn-secondary" onclick="viewNDA()">üìÑ View NDA</button>
                </div>
            </div>

            <!-- Card 2: INA Report Review (Workflow Step 2) -->
            <div class="dashboard-card review-card">
                <div class="status-indicator status-pending">üîí Locked</div>
                <div class="card-header">
                    <div class="card-icon info-icon">üìñ</div>
                    <div class="card-title">INA Report Review</div>
                </div>
                <p class="card-description">
                    Review the Immediate Needs Assessment (INA) report and provide feedback. Confidential details are blacked out for security. Submit corrections to proceed to payment.
                </p>
                <div class="card-actions">
                    <button class="btn btn-primary" onclick="startReview()" disabled>üìñ Start Review</button>
                    <button class="btn btn-secondary" onclick="previewDocument()">üëÅÔ∏è Preview Document</button>
                    <button class="btn btn-secondary" onclick="viewInstructions()">üí¨ View Instructions</button>
                </div>
            </div>

            <!-- Card 3: Payment Processing (Workflow Step 3) -->
            <div class="dashboard-card payment-card">
                <div class="status-indicator status-pending">üîí Locked</div>
                <div class="card-header">
                    <div class="card-icon warning-icon">üí∞</div>
                    <div class="card-title">Payment Processing</div>
                </div>
                <p class="card-description">
                    Payment will be processed immediately after you submit your corrected draft. Your payment method is securely on file from your HR Compliance onboarding.
                </p>
                <div class="card-actions">
                    <button class="btn btn-warning" disabled>‚è≥ Awaiting Review</button>
                    <button class="btn btn-secondary" onclick="viewPaymentInfo()">üìä View Payment Info</button>
                </div>
            </div>

            <!-- Card 4: Professional Readers Calendar -->
            <div class="dashboard-card schedule-card">
                <div class="status-indicator status-pending">üìÖ Available</div>
                <div class="card-header">
                    <div class="card-icon info-icon">üìÖ</div>
                    <div class="card-title">Professional Readers Calendar</div>
                </div>
                <p class="card-description">
                    Schedule your Independent Needs Assessment (INA) review sessions. View assigned cases and manage your availability for upcoming reviews.
                </p>
                <div class="card-actions">
                    <button class="btn btn-primary" onclick="viewSchedule()">üìÖ View Schedule</button>
                    <button class="btn btn-secondary" onclick="setAvailability()">‚öôÔ∏è Set Availability</button>
                </div>
            </div>

            <!-- Card 5: Readers Management Hub (RMH) -->
            <div class="dashboard-card management-hub-card">
                <div class="status-indicator status-pending">üìö Available</div>
                <div class="card-header">
                    <div class="card-icon info-icon">üìö</div>
                    <div class="card-title">Readers Management Hub</div>
                </div>
                <p class="card-description">
                    Your centralized workspace for document management. Access your NDAs, review materials, and track completed assignments.
                </p>
                <div class="card-actions">
                    <button class="btn btn-primary" onclick="openReadersHub()">üìÑ My Documents</button>
                    <button class="btn btn-secondary" onclick="openReadersHub()">üìÅ Client Documents</button>
                </div>
            </div>
        </div><!-- Close workflow-cards -->

<!-- ========================================== -->
<!-- LOCATION BLOCK 6: SECURITY NOTICE & FOOTER (Merged Container) -->
<!-- ========================================== -->
        <div class="footer-container">
            <div class="security-notice">
                <div class="security-notice-content">
                    <span class="security-notice-icon">üõ°Ô∏è</span>
                    <p class="security-notice-text">
                        <strong>Security Notice:</strong> All data is encrypted in transit and at rest. This system is GDPR compliant and maintains strict audit trails for all actions. Access is restricted and monitored.
                    </p>
                </div>
            </div>

            <div class="footer">
                <div class="footer-content">
                    <p class="footer-text">
                        ¬© 2025 QOLAE. All rights reserved. Secure legal document review portal.
                    </p>
                    <div class="footer-links">
                        <a href="/privacy-policy">Privacy Policy</a>
                        <a href="/terms-of-service">Terms of Service</a>
                        <a href="/support">Support</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

<!-- ========================================== -->
<!-- LOCATION BLOCK 7: JAVASCRIPT - READER TYPE & WORKFLOW MANAGEMENT -->
<!-- All handlers are endpoint-ready with placeholder API calls -->
<!-- ========================================== -->
    <script>
        // ===== API ENDPOINT CONFIGURATION =====
        // TODO: Replace with actual API endpoints
        const API_ENDPOINTS = {
            viewNDA: '/api/nda/view',
            downloadNDA: '/api/nda/download',
            startReview: '/api/review/start',
            previewDocument: '/api/review/preview',
            viewInstructions: '/api/review/instructions',
            viewPaymentDetails: '/api/payment/details',
            openDocument: '/api/documents/open',
            browseLibrary: '/api/library/browse',
            uploadDocument: '/api/documents/upload',
            viewDocument: '/api/documents/view',
            deleteDocument: '/api/documents/delete'
        };

        // ===== READER INFORMATION =====
        // Reader data is now server-side rendered from backend
        // No client-side updates needed - all dynamic data comes from EJS

        // ===== NDA HANDLERS (ENDPOINT READY) =====
        function viewNDA() {
            // Open NDA modal via server-side rendering
            const readerPin = '<%= reader.readerPin %>';
            window.location.href = `/readersDashboard?readerPin=${readerPin}&modal=nda`;
        }

        function downloadNDA() {
            console.log('Calling API:', API_ENDPOINTS.downloadNDA);
            // TODO: Implement API call
            // Example: fetch(API_ENDPOINTS.downloadNDA).then(response => response.blob()).then(downloadFile);
            alert('Download NDA - Ready for endpoint integration');
        }

        // ===== REPORT REVIEW HANDLERS (ENDPOINT READY) =====
        function startReview() {
            // Get current assignment ID (you may need to adjust this)
            const assignmentId = getCurrentAssignmentId(); // TODO: Implement this
            
            // Open review modal via server-side rendering
            const readerPin = '<%= reader.readerPin %>';
            window.location.href = `/readersDashboard?readerPin=${readerPin}&modal=review&assignmentId=${assignmentId}`;
        }

        function previewDocument() {
            console.log('Calling API:', API_ENDPOINTS.previewDocument);
            // TODO: Implement API call
            // Example: fetch(API_ENDPOINTS.previewDocument).then(response => response.blob()).then(openPDFViewer);
            alert('Preview Document - Ready for endpoint integration');
        }

        function viewInstructions() {
            console.log('Calling API:', API_ENDPOINTS.viewInstructions);
            // TODO: Implement API call
            // Example: openModal with instructions content
            alert('View Instructions - Ready for endpoint integration');
        }

        // ===== PAYMENT HANDLERS (ENDPOINT READY) =====
        function viewPaymentInfo() {
            // Get current assignment ID (you may need to adjust this)
            const assignmentId = getCurrentAssignmentId(); // TODO: Implement this
            
            // Open payment modal via server-side rendering
            const readerPin = '<%= reader.readerPin %>';
            window.location.href = `/readersDashboard?readerPin=${readerPin}&modal=payment&assignmentId=${assignmentId}`;
        }

        // Helper function to get current assignment ID
        // TODO: Replace with actual logic to fetch from session or API
        function getCurrentAssignmentId() {
            // For now, return a placeholder
            // In production, this should:
            // 1. Get from session storage
            // 2. Get from URL parameter
            // 3. Fetch from API: /api/readers/current-assignment
            return 'PLACEHOLDER_ASSIGNMENT_ID';
        }

        // ===== PROFESSIONAL READERS CALENDAR HANDLERS (ENDPOINT READY) =====
        function viewSchedule() {
            console.log('Calling API: View Professional Readers Schedule');
            // TODO: Implement API call
            // Example: window.location.href = '/readers/schedule';
            alert('View Professional Readers Schedule - Ready for endpoint integration');
        }

        function setAvailability() {
            console.log('Calling API: Set Availability');
            // TODO: Implement API call
            // Example: openModal with availability calendar
            alert('Set Availability - Ready for endpoint integration');
        }

        // ===== DOCUMENT MANAGEMENT HANDLERS (ENDPOINT READY) =====
        function openDocument(documentId) {
            console.log('Opening document:', documentId, 'via', API_ENDPOINTS.openDocument);
            // TODO: Implement API call
            // Example: fetch(`${API_ENDPOINTS.openDocument}/${documentId}`).then(openReviewInterface);
            alert(`Open Document ${documentId} - Ready for endpoint integration`);
        }

        function viewDocument(documentId) {
            console.log('Viewing document:', documentId, 'via', API_ENDPOINTS.viewDocument);
            // TODO: Implement API call
            // Example: fetch(`${API_ENDPOINTS.viewDocument}/${documentId}`).then(response => response.blob()).then(openViewer);
            alert(`View Document ${documentId} - Ready for endpoint integration`);
        }

        function deleteDocument(documentId) {
            if (confirm('Are you sure you want to delete this document? This action cannot be undone.')) {
                console.log('Deleting document:', documentId, 'via', API_ENDPOINTS.deleteDocument);
                // TODO: Implement API call
                // Example: fetch(`${API_ENDPOINTS.deleteDocument}/${documentId}`, { method: 'DELETE' }).then(refreshDocumentList);
                alert(`Delete Document ${documentId} - Ready for endpoint integration`);
            }
        }

        // ===== READERS MANAGEMENT HUB =====
        function openReadersHub() {
            console.log('Opening Readers Management Hub...');
            // TODO: Backend integration - Open RMH modal/page
            // This will be implemented later based on the CMH wizard workflow pattern
            alert('Readers Management Hub\n\nThis will open your document management workspace.\n\nTo be implemented based on CMH wizard pattern.');
        }

        // ===== WORKFLOW PROGRESS MANAGEMENT =====
        function updateProgress(step) {
            const progressFill = document.getElementById('progressFill');
            const steps = document.querySelectorAll('.step');
            
            steps.forEach((stepEl, index) => {
                stepEl.classList.remove('active', 'completed', 'pending');
                
                if (index < step - 1) {
                    stepEl.classList.add('completed');
                } else if (index === step - 1) {
                    stepEl.classList.add('active');
                } else {
                    stepEl.classList.add('pending');
                }
            });

            progressFill.style.width = `${((step - 1) / 2) * 100}%`;
        }

        // ===== INITIALIZATION =====
        // Initialize with step 2 (Document Review)
        updateProgress(2);

        // Log ready status
        console.log('QOLAE Dashboard initialized - All handlers ready for endpoint integration');
    </script>

<!-- ==============================================
     SERVER-SIDE MODAL OVERLAYS (Following LawyersDashboard Pattern)
     ============================================== -->

<!-- NDA Modal Overlay -->
<% if (showModal === 'nda' && modalData) { %>
  <div class="server-modal-overlay">
    <div class="server-modal-container">
      <a href="/readersDashboard?readerPin=<%= reader.readerPin %>" class="server-modal-close" title="Close">‚úï</a>
      <%- include('nda', {
        reader: modalData.reader,
        nda: modalData.nda
      }) %>
    </div>
  </div>
<% } %>

<!-- INA Report Review Modal Overlay -->
<% if (showModal === 'review' && modalData) { %>
  <div class="server-modal-overlay">
    <div class="server-modal-container">
      <a href="/readersDashboard?readerPin=<%= reader.readerPin %>" class="server-modal-close" title="Close">‚úï</a>
      <%- include('inaReportReview', {
        assignment: modalData.assignment,
        reader: modalData.reader
      }) %>
    </div>
  </div>
<% } %>

<!-- Payment Processing Modal Overlay -->
<% if (showModal === 'payment' && modalData) { %>
  <div class="server-modal-overlay">
    <div class="server-modal-container">
      <a href="/readersDashboard?readerPin=<%= reader.readerPin %>" class="server-modal-close" title="Close">‚úï</a>
      <%- include('paymentProcessing', {
        assignmentId: modalData.assignmentId,
        readerPin: modalData.readerPin,
        readerName: modalData.readerName,
        readerEmail: modalData.readerEmail,
        readerType: modalData.readerType,
        paymentStatus: modalData.paymentStatus,
        paymentAmount: modalData.paymentAmount,
        paymentReference: modalData.paymentReference,
        assignedAt: modalData.assignedAt,
        correctionsSubmittedAt: modalData.correctionsSubmittedAt,
        paymentApprovedAt: modalData.paymentApprovedAt,
        paymentProcessedAt: modalData.paymentProcessedAt
      }) %>
    </div>
  </div>
<% } %>

<!-- Modal Overlay Styles -->
<style>
.server-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  animation: fadeIn 0.3s ease-in-out;
}

.server-modal-container {
  position: relative;
  background: white;
  border-radius: 12px;
  max-width: 95%;
  max-height: 95%;
  overflow: auto;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
  animation: slideIn 0.3s ease-in-out;
}

.server-modal-close {
  position: absolute;
  top: 20px;
  right: 20px;
  width: 40px;
  height: 40px;
  background: #e74c3c;
  color: white;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  text-decoration: none;
  font-size: 24px;
  font-weight: bold;
  cursor: pointer;
  z-index: 10000;
  transition: all 0.2s ease;
}

.server-modal-close:hover {
  background: #c0392b;
  transform: scale(1.1);
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideIn {
  from { 
    opacity: 0;
    transform: translateY(-50px);
  }
  to { 
    opacity: 1;
    transform: translateY(0);
  }
}
</style>

</body>
</html>